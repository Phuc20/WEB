<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Giỏ hàng - Đồ Ăn Vặt</title>
  <link rel="stylesheet" href="./styles/main.css">
  <link rel="stylesheet" href="./styles/cart.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
</head>
<body>

<header class="header">
  <div class="header-container">
    <!-- Logo -->
    <div class="logo">
      <a href="main.html">
        <img src="./anvat/ecofood-logo-template.png" style="width:80px; height:80px;" alt="Logo Đồ ăn vặt">
      </a>
    </div>
    <!-- Danh mục -->
    <nav class="nav">
      <a href="main.html" class="nav-link">Trang chủ</a>
      <div class="nav-products">
        <span class="nav-link nav-products-title">Sản phẩm <i class="fas fa-chevron-down"></i></span>
        <div class="nav-products-dropdown">
          <a href="main.html?category=banh-trang">Bánh tráng</a>
          <a href="main.html?category=com-chay">Cơm cháy</a>
          <a href="main.html?category=keo">Kẹo</a>
          <a href="main.html?category=snack">Snack</a>
          <a href="main.html?category=chan-ga">Chân gà</a>
        </div>
      </div>
      <a href="about.html" class="nav-link">Giới thiệu</a>
      <a href="lienhe.html" class="nav-link">Liên hệ</a>
    </nav>
    <!-- Icon giỏ hàng & đăng nhập -->
    <div class="header-actions">
      <a href="Cart.html" class="cart-btn" title="Giỏ hàng">
        <i class="fas fa-shopping-cart"></i>
      </a>
      <a href="login.html" class="login-btn">Đăng Nhập</a>
      <a href="ThanhToan.html" class="thanhtoan-btn" title="Thanh Toán ">
        <i class="fa-regular fa-credit-card fa-xl" style="color: #000000;"></i>
      </a>
    </div>
  </div>
</header>

<main class="cart-container">
    <h1 class="cart-title">Giỏ hàng của bạn</h1>

    <div class="cart-wrapper">
        <div id="cartContent" class="cart-content">
            <table id="cartTable" class="cart-table">
                <thead>
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Hình ảnh</th>
                        <th>Số lượng</th>
                        <th>Giá</th>
                        <th>Thành tiền</th>
                        <th>Xóa</th>
                    </tr>
                </thead>
                <tbody id="cartItems"></tbody>
            </table>

            <div id="emptyCartMsg" class="empty-cart">
                <i class="fas fa-shopping-cart"></i>
                <p>Giỏ hàng của bạn đang trống</p>
                <a href="main.html" class="continue-shopping">Tiếp tục mua sắm</a>
            </div>
        </div>

        <div class="cart-summary" id="cartSummary">
            <h2>Tổng đơn hàng</h2>
            <div class="summary-item">
                <span>Tạm tính:</span>
                <span id="subtotal">0 VNĐ</span>
            </div>
            <div class="summary-item">
                <span>Phí vận chuyển:</span>
                <span id="shipping">15.000 VNĐ</span>
            </div>
            <div class="summary-total">
                <span>Tổng cộng:</span>
                <span id="cartTotal">0 VNĐ</span>
            </div>
            <button id="checkoutBtn" class="checkout-btn">
                <i class="fas fa-shopping-bag"></i>
                Đặt hàng
            </button>
        </div>
    </div>
</main>

<footer>
  <div class="footer-container">
    <!-- Logo and Contact Info -->
    <div class="footer-logo">
      <div class="hotline">Hotline: 0819056277</div>
      <div class="hotline-label">GIAO HÀNG NHANH</div>
      <p>Cửa hàng Đồ Ăn Vặt Ngon</p>
      <p>Trường Đại học Công nghệ Thông tin và Truyền thông Việt - Hàn, Đại học Đà Nẵng</p>
      <p>SĐT: +84 ***************</p>
      <p>MST: 01041115527</p>
      <p>Ngày thành lập: 01/04/2025</p>
    </div>
    <!-- Giới thiệu -->
    <div class="footer-section">
      <h3>Giới Thiệu</h3>
      <a href="./pages/he-thong.html">Hệ thống cửa hàng</a><br>
      <a href="./pages/cau-chuyen.html">Câu chuyện thương hiệu</a><br>
      <a href="./pages/uu-dai.html">Ưu đãi thành viên</a><br>
      <a href="./pages/tin-tuc.html">Tin tức & sự kiện</a><br>
      <a href="./pages/tuyen-dung.html">Tuyển dụng</a>
    </div>
    <!-- Liên hệ -->
    <div class="footer-section">
      <h3>Liên Hệ</h3>
      <a href="./pages/huong-dan-mua.html">Hướng dẫn mua hàng</a><br>
      <a href="./pages/chinh-sach-giao.html">Chính sách giao hàng</a><br>
      <a href="./pages/chinh-sach-baomat.html">Chính sách bảo mật</a><br>
      <a href="./pages/dieu-khoan.html">Điều khoản và điều kiện</a>
    </div>
    <!-- Liên kết và hỗ trợ -->
    <div class="footer-section">
      <h3>Liên Kết Với Chúng Tôi</h3>
      <div class="social-icons">
        <img src="./anvat/facebook.png" style="width:32px; height:32px; object-fit:contain;" alt="Facebook" />
        <img src="./anvat/tiktok.png" style="width:32px; height:32px; object-fit:contain;" alt="Tiktok" />
        <img src="./anvat/instagram.png" style="width:32px; height:32px; object-fit:contain;" alt="Instagram" />
      </div>
      <div class="certification">
        <img src="./anvat/bocongthuong.png" style="width:100px; height:50px; object-fit:contain;" alt="Đã thông báo Bộ Công Thương">
      </div>
      <h3>Tổng Đài Hỗ Trợ</h3>
      <p>Đặt hàng: ********** (9:30 – 21:30)</p>
      <p>Tổng đài CSKH: ********** (9:30 – 21:30)</p>
    </div>
  </div>
</footer>

<script>
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  const cartItemsEl = document.getElementById('cartItems');
  const cartTable = document.getElementById('cartTable');
  const cartTotalEl = document.getElementById('cartTotal');
  const emptyCartMsg = document.getElementById('emptyCartMsg');
  const checkoutBtn = document.getElementById('checkoutBtn');

  function renderCart() {
    if (cart.length === 0) {
      cartTable.style.display = 'none';
      cartTotalEl.style.display = 'none';
      checkoutBtn.style.display = 'none';
      emptyCartMsg.style.display = 'block';
      return;
    }

    cartTable.style.display = 'table';
    cartTotalEl.style.display = 'block';
    checkoutBtn.style.display = 'block';
    emptyCartMsg.style.display = 'none';

    cartItemsEl.innerHTML = '';

    let total = 0;

    cart.forEach((item, index) => {
      let priceNum = parseInt(item.price.replace(/\D/g, '')) || 0;
      let qty = item.quantity || 1;
      let itemTotal = priceNum * qty;
      total += itemTotal;

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${item.title}</td>
        <td><img src="${item.image || ''}" alt="${item.title}"></td>
        <td>
          <button class="qty-btn" onclick="updateQuantity(${index}, -1)">−</button>
          ${qty}
          <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
        </td>
        <td>${item.price}</td>
        <td>${itemTotal.toLocaleString()} VNĐ</td>
        <td><button onclick="removeItem(${index})">Xóa</button></td>
      `;
      cartItemsEl.appendChild(tr);
    });

    cartTotalEl.textContent = `Tổng tiền: ${total.toLocaleString()} VNĐ`;
  }

  function updateQuantity(index, change) {
    if (cart[index].quantity + change > 0) {
      cart[index].quantity += change;
    } else {
      cart.splice(index, 1);
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  }

  function removeItem(index) {
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  }

  checkoutBtn.addEventListener('click', () => {
    if(cart.length === 0){
      alert('Giỏ hàng trống, không thể đặt hàng!');
      return;
    }
    alert('Cảm ơn bạn đã đặt hàng! Đơn hàng của bạn sẽ được xử lý sớm.');
    cart = [];
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
  });

  renderCart();
</script>

</body>
</html>
